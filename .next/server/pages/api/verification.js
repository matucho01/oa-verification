"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/verification";
exports.ids = ["pages/api/verification"];
exports.modules = {

/***/ "@govtechsg/oa-verify":
/*!***************************************!*\
  !*** external "@govtechsg/oa-verify" ***!
  \***************************************/
/***/ ((module) => {

module.exports = require("@govtechsg/oa-verify");

/***/ }),

/***/ "@govtechsg/open-attestation":
/*!**********************************************!*\
  !*** external "@govtechsg/open-attestation" ***!
  \**********************************************/
/***/ ((module) => {

module.exports = require("@govtechsg/open-attestation");

/***/ }),

/***/ "multiparty":
/*!*****************************!*\
  !*** external "multiparty" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("multiparty");

/***/ }),

/***/ "next-connect":
/*!*******************************!*\
  !*** external "next-connect" ***!
  \*******************************/
/***/ ((module) => {

module.exports = import("next-connect");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "(api)/./middleware/middleware.js":
/*!**********************************!*\
  !*** ./middleware/middleware.js ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_connect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-connect */ \"next-connect\");\n/* harmony import */ var multiparty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! multiparty */ \"multiparty\");\n/* harmony import */ var multiparty__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(multiparty__WEBPACK_IMPORTED_MODULE_1__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([next_connect__WEBPACK_IMPORTED_MODULE_0__]);\nnext_connect__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nconst middleware = (0,next_connect__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\nmiddleware.use(async (req, res, next)=>{\n    const form = new (multiparty__WEBPACK_IMPORTED_MODULE_1___default().Form)();\n    await form.parse(req, function(err, fields, files) {\n        req.body = fields;\n        req.files = files;\n        next();\n    });\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (middleware);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9taWRkbGV3YXJlL21pZGRsZXdhcmUuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFzQztBQUNIO0FBRW5DLE1BQU1FLFVBQVUsR0FBR0Ysd0RBQVcsRUFBRTtBQUVoQ0UsVUFBVSxDQUFDQyxHQUFHLENBQUMsT0FBT0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksR0FBSztJQUN2QyxNQUFNQyxJQUFJLEdBQUcsSUFBSU4sd0RBQWUsRUFBRTtJQUVsQyxNQUFNTSxJQUFJLENBQUNFLEtBQUssQ0FBQ0wsR0FBRyxFQUFFLFNBQVVNLEdBQUcsRUFBRUMsTUFBTSxFQUFFQyxLQUFLLEVBQUU7UUFDbERSLEdBQUcsQ0FBQ1MsSUFBSSxHQUFHRixNQUFNO1FBQ2pCUCxHQUFHLENBQUNRLEtBQUssR0FBR0EsS0FBSztRQUNqQk4sSUFBSSxFQUFFO0lBQ1IsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBRUYsaUVBQWVKLFVBQVUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92ZXJpZmllci8uL21pZGRsZXdhcmUvbWlkZGxld2FyZS5qcz85NDg3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBuZXh0Q29ubmVjdCBmcm9tICduZXh0LWNvbm5lY3QnXHJcbmltcG9ydCBtdWx0aXBhcnR5IGZyb20gJ211bHRpcGFydHknXHJcblxyXG5jb25zdCBtaWRkbGV3YXJlID0gbmV4dENvbm5lY3QoKVxyXG5cclxubWlkZGxld2FyZS51c2UoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XHJcbiAgY29uc3QgZm9ybSA9IG5ldyBtdWx0aXBhcnR5LkZvcm0oKVxyXG5cclxuICBhd2FpdCBmb3JtLnBhcnNlKHJlcSwgZnVuY3Rpb24gKGVyciwgZmllbGRzLCBmaWxlcykge1xyXG4gICAgcmVxLmJvZHkgPSBmaWVsZHNcclxuICAgIHJlcS5maWxlcyA9IGZpbGVzXHJcbiAgICBuZXh0KClcclxuICB9KVxyXG59KVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgbWlkZGxld2FyZSJdLCJuYW1lcyI6WyJuZXh0Q29ubmVjdCIsIm11bHRpcGFydHkiLCJtaWRkbGV3YXJlIiwidXNlIiwicmVxIiwicmVzIiwibmV4dCIsImZvcm0iLCJGb3JtIiwicGFyc2UiLCJlcnIiLCJmaWVsZHMiLCJmaWxlcyIsImJvZHkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./middleware/middleware.js\n");

/***/ }),

/***/ "(api)/./pages/api/verification.js":
/*!***********************************!*\
  !*** ./pages/api/verification.js ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"config\": () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _middleware_middleware__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../middleware/middleware */ \"(api)/./middleware/middleware.js\");\n/* harmony import */ var next_connect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-connect */ \"next-connect\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _govtechsg_open_attestation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @govtechsg/open-attestation */ \"@govtechsg/open-attestation\");\n/* harmony import */ var _govtechsg_open_attestation__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_govtechsg_open_attestation__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _govtechsg_oa_verify__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @govtechsg/oa-verify */ \"@govtechsg/oa-verify\");\n/* harmony import */ var _govtechsg_oa_verify__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_govtechsg_oa_verify__WEBPACK_IMPORTED_MODULE_4__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_middleware_middleware__WEBPACK_IMPORTED_MODULE_0__, next_connect__WEBPACK_IMPORTED_MODULE_1__]);\n([_middleware_middleware__WEBPACK_IMPORTED_MODULE_0__, next_connect__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nfunction validateJSON(body) {\n    try {\n        var data = JSON.parse(body);\n        // if came to here, then valid\n        return data;\n    } catch (e) {\n        // failed to parse\n        return null;\n    }\n}\nconst handler = (0,next_connect__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\nhandler.use(_middleware_middleware__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\nhandler.post(async (req, res)=>{\n    if (req.files.cert[0].path == undefined) {\n        // File does not exist.\n        res.redirect(\"/nofile\");\n    } else {\n        // File exists.\n        let rawfiledata = fs__WEBPACK_IMPORTED_MODULE_2___default().readFileSync(req.files.cert[0].path);\n        let oajson = JSON.parse(rawfiledata);\n        const verify = (0,_govtechsg_oa_verify__WEBPACK_IMPORTED_MODULE_4__.verificationBuilder)(_govtechsg_oa_verify__WEBPACK_IMPORTED_MODULE_4__.openAttestationVerifiers, {\n            network: \"sepolia\"\n        });\n        const results = [];\n        const promisesCallback = (verificationMethods)=>{\n            for (const verificationMethod of verificationMethods){\n                verificationMethod.then((fragment)=>{\n                    if (fragment.status !== \"SKIPPED\") {\n                        results.push({\n                            name: fragment.name,\n                            status: fragment.status\n                        });\n                    }\n                });\n            }\n        };\n        const fragments = await verify(oajson, promisesCallback);\n        console.log((0,_govtechsg_oa_verify__WEBPACK_IMPORTED_MODULE_4__.isValid)(fragments));\n        // Message translation\n        const translatedResults = results.map((result)=>{\n            let status;\n            if (result.status === \"VALID\") {\n                status = \"√  success\";\n            } else {\n                status = \"\\xd7  error\";\n            }\n            let message;\n            switch(result.name){\n                case \"OpenAttestationHash\":\n                    if (status === \"√  success\") {\n                        message = \"The document has not been tampered\";\n                    } else if (status === \"\\xd7  error\") {\n                        message = \"The document has been tampered\";\n                    }\n                    break;\n                case \"OpenAttestationEthereumDocumentStoreStatus\":\n                    if (status === \"√  success\") {\n                        message = \"The document has been issued\";\n                    } else if (status === \"\\xd7  error\") {\n                        message = \"The document has not been issued\";\n                    }\n                    break;\n                case \"OpenAttestationDnsTxtIdentityProof\":\n                    if (status === \"√  success\") {\n                        message = \"The issuer identity has been verified\";\n                    } else if (status === \"\\xd7  error\") {\n                        message = \"The issuer identity has not been verified\";\n                    }\n                    break;\n                default:\n                    message = \"Unknown verification\";\n                    break;\n            }\n            return `${status}   ${message}`;\n        });\n        console.log(translatedResults);\n        const outputFilePath = \"verificationResults.txt\";\n        // Write results to a file\n        fs__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(outputFilePath, translatedResults.join(\"\\n\"), \"utf-8\");\n        console.log(`Results written to: ${outputFilePath}`);\n        if ((0,_govtechsg_open_attestation__WEBPACK_IMPORTED_MODULE_3__.verifySignature)(oajson) && (0,_govtechsg_open_attestation__WEBPACK_IMPORTED_MODULE_3__.validateSchema)(oajson) && (0,_govtechsg_oa_verify__WEBPACK_IMPORTED_MODULE_4__.isValid)(fragments)) {\n            res.redirect(\"/success\");\n        } else {\n            res.redirect(\"/failed\");\n        }\n    }\n});\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (handler);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0FBRUssTUFBTXlCLE1BQU0sR0FBRztJQUNwQkMsR0FBRyxFQUFFO1FBQ0hDLFVBQVUsRUFBRSxLQUFLO0tBQ2xCO0NBQ0Y7QUFFRCxpRUFBZXBDLE9BQU8iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92ZXJpZmllci8uL3BhZ2VzL2FwaS92ZXJpZmljYXRpb24uanM/YzBiZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbWlkZGxld2FyZSBmcm9tICcuLi8uLi9taWRkbGV3YXJlL21pZGRsZXdhcmUnXHJcbmltcG9ydCBuZXh0Q29ubmVjdCBmcm9tICduZXh0LWNvbm5lY3QnXHJcbmltcG9ydCBmcyBmcm9tICdmcydcclxuaW1wb3J0IHsgdmFsaWRhdGVTY2hlbWEsIHZlcmlmeVNpZ25hdHVyZSB9IGZyb20gXCJAZ292dGVjaHNnL29wZW4tYXR0ZXN0YXRpb25cIjtcclxuaW1wb3J0IHsgaXNWYWxpZCwgdmVyaWZpY2F0aW9uQnVpbGRlciwgb3BlbkF0dGVzdGF0aW9uVmVyaWZpZXJzIH0gZnJvbSAnQGdvdnRlY2hzZy9vYS12ZXJpZnknO1xyXG5cclxuZnVuY3Rpb24gdmFsaWRhdGVKU09OKGJvZHkpIHtcclxuICB0cnkge1xyXG4gICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKGJvZHkpO1xyXG4gICAgLy8gaWYgY2FtZSB0byBoZXJlLCB0aGVuIHZhbGlkXHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICAvLyBmYWlsZWQgdG8gcGFyc2VcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuY29uc3QgaGFuZGxlciA9IG5leHRDb25uZWN0KClcclxuaGFuZGxlci51c2UobWlkZGxld2FyZSlcclxuXHJcbmhhbmRsZXIucG9zdChhc3luYyAocmVxLCByZXMpID0+IHtcclxuICBpZiAocmVxLmZpbGVzLmNlcnRbMF0ucGF0aCA9PSB1bmRlZmluZWQpIHtcclxuICAgIC8vIEZpbGUgZG9lcyBub3QgZXhpc3QuXHJcbiAgICByZXMucmVkaXJlY3QoJy9ub2ZpbGUnKVxyXG5cclxuICB9IGVsc2Uge1xyXG4gICAgLy8gRmlsZSBleGlzdHMuXHJcbiAgICBsZXQgcmF3ZmlsZWRhdGEgPSBmcy5yZWFkRmlsZVN5bmMocmVxLmZpbGVzLmNlcnRbMF0ucGF0aCk7XHJcbiAgICBsZXQgb2Fqc29uID0gSlNPTi5wYXJzZShyYXdmaWxlZGF0YSk7XHJcblxyXG4gICAgY29uc3QgdmVyaWZ5ID0gdmVyaWZpY2F0aW9uQnVpbGRlcihvcGVuQXR0ZXN0YXRpb25WZXJpZmllcnMsIHtcclxuICAgICAgbmV0d29yazogXCJzZXBvbGlhXCIsXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCByZXN1bHRzID0gW107XHJcblxyXG4gICAgY29uc3QgcHJvbWlzZXNDYWxsYmFjayA9ICh2ZXJpZmljYXRpb25NZXRob2RzKSA9PiB7XHJcbiAgICAgIGZvciAoY29uc3QgdmVyaWZpY2F0aW9uTWV0aG9kIG9mIHZlcmlmaWNhdGlvbk1ldGhvZHMpIHtcclxuICAgICAgICB2ZXJpZmljYXRpb25NZXRob2QudGhlbigoZnJhZ21lbnQpID0+IHtcclxuICAgICAgICAgIGlmIChmcmFnbWVudC5zdGF0dXMgIT09ICdTS0lQUEVEJykge1xyXG4gICAgICAgICAgICByZXN1bHRzLnB1c2goe1xyXG4gICAgICAgICAgICAgIG5hbWU6IGZyYWdtZW50Lm5hbWUsXHJcbiAgICAgICAgICAgICAgc3RhdHVzOiBmcmFnbWVudC5zdGF0dXNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgZnJhZ21lbnRzID0gYXdhaXQgdmVyaWZ5KG9hanNvbiwgcHJvbWlzZXNDYWxsYmFjayk7XHJcblxyXG4gICAgY29uc29sZS5sb2coaXNWYWxpZChmcmFnbWVudHMpKTtcclxuXHJcbiAgICAvLyBNZXNzYWdlIHRyYW5zbGF0aW9uXHJcbiAgICBjb25zdCB0cmFuc2xhdGVkUmVzdWx0cyA9IHJlc3VsdHMubWFwKChyZXN1bHQpID0+IHtcclxuICAgICAgbGV0IHN0YXR1cztcclxuICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09ICdWQUxJRCcpIHtcclxuICAgICAgICBzdGF0dXMgPSAn4oiaICBzdWNjZXNzJztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzdGF0dXMgPSAnw5cgIGVycm9yJztcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IG1lc3NhZ2U7XHJcbiAgICAgIHN3aXRjaCAocmVzdWx0Lm5hbWUpIHtcclxuICAgICAgICBjYXNlICdPcGVuQXR0ZXN0YXRpb25IYXNoJzpcclxuICAgICAgICAgIGlmIChzdGF0dXMgPT09ICfiiJogIHN1Y2Nlc3MnKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPSAnVGhlIGRvY3VtZW50IGhhcyBub3QgYmVlbiB0YW1wZXJlZCc7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gJ8OXICBlcnJvcicpIHtcclxuICAgICAgICAgICAgbWVzc2FnZSA9ICdUaGUgZG9jdW1lbnQgaGFzIGJlZW4gdGFtcGVyZWQnO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgJ09wZW5BdHRlc3RhdGlvbkV0aGVyZXVtRG9jdW1lbnRTdG9yZVN0YXR1cyc6XHJcbiAgICAgICAgICBpZiAoc3RhdHVzID09PSAn4oiaICBzdWNjZXNzJykge1xyXG4gICAgICAgICAgICBtZXNzYWdlID0gJ1RoZSBkb2N1bWVudCBoYXMgYmVlbiBpc3N1ZWQnO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChzdGF0dXMgPT09ICfDlyAgZXJyb3InKSB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2UgPSAnVGhlIGRvY3VtZW50IGhhcyBub3QgYmVlbiBpc3N1ZWQnO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgJ09wZW5BdHRlc3RhdGlvbkRuc1R4dElkZW50aXR5UHJvb2YnOlxyXG4gICAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ+KImiAgc3VjY2VzcycpIHtcclxuICAgICAgICAgICAgbWVzc2FnZSA9ICdUaGUgaXNzdWVyIGlkZW50aXR5IGhhcyBiZWVuIHZlcmlmaWVkJztcclxuICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSAnw5cgIGVycm9yJykge1xyXG4gICAgICAgICAgICBtZXNzYWdlID0gJ1RoZSBpc3N1ZXIgaWRlbnRpdHkgaGFzIG5vdCBiZWVuIHZlcmlmaWVkJztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgbWVzc2FnZSA9ICdVbmtub3duIHZlcmlmaWNhdGlvbic7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIGAke3N0YXR1c30gICAke21lc3NhZ2V9YDtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKHRyYW5zbGF0ZWRSZXN1bHRzKTtcclxuXHJcbiAgICBjb25zdCBvdXRwdXRGaWxlUGF0aCA9ICd2ZXJpZmljYXRpb25SZXN1bHRzLnR4dCc7XHJcblxyXG4gICAgLy8gV3JpdGUgcmVzdWx0cyB0byBhIGZpbGVcclxuICAgIGZzLndyaXRlRmlsZVN5bmMob3V0cHV0RmlsZVBhdGgsIHRyYW5zbGF0ZWRSZXN1bHRzLmpvaW4oJ1xcbicpLCAndXRmLTgnKTtcclxuICAgIGNvbnNvbGUubG9nKGBSZXN1bHRzIHdyaXR0ZW4gdG86ICR7b3V0cHV0RmlsZVBhdGh9YCk7XHJcblxyXG4gICAgaWYgKHZlcmlmeVNpZ25hdHVyZShvYWpzb24pICYmIHZhbGlkYXRlU2NoZW1hKG9hanNvbikgJiYgaXNWYWxpZChmcmFnbWVudHMpKSB7XHJcbiAgICAgIHJlcy5yZWRpcmVjdCgnL3N1Y2Nlc3MnKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVzLnJlZGlyZWN0KCcvZmFpbGVkJylcclxuICAgIH1cclxuICB9XHJcblxyXG59KVxyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBhcGk6IHtcclxuICAgIGJvZHlQYXJzZXI6IGZhbHNlXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBoYW5kbGVyXHJcbiJdLCJuYW1lcyI6WyJtaWRkbGV3YXJlIiwibmV4dENvbm5lY3QiLCJmcyIsInZhbGlkYXRlU2NoZW1hIiwidmVyaWZ5U2lnbmF0dXJlIiwiaXNWYWxpZCIsInZlcmlmaWNhdGlvbkJ1aWxkZXIiLCJvcGVuQXR0ZXN0YXRpb25WZXJpZmllcnMiLCJ2YWxpZGF0ZUpTT04iLCJib2R5IiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsImUiLCJoYW5kbGVyIiwidXNlIiwicG9zdCIsInJlcSIsInJlcyIsImZpbGVzIiwiY2VydCIsInBhdGgiLCJ1bmRlZmluZWQiLCJyZWRpcmVjdCIsInJhd2ZpbGVkYXRhIiwicmVhZEZpbGVTeW5jIiwib2Fqc29uIiwidmVyaWZ5IiwibmV0d29yayIsInJlc3VsdHMiLCJwcm9taXNlc0NhbGxiYWNrIiwidmVyaWZpY2F0aW9uTWV0aG9kcyIsInZlcmlmaWNhdGlvbk1ldGhvZCIsInRoZW4iLCJmcmFnbWVudCIsInN0YXR1cyIsInB1c2giLCJuYW1lIiwiZnJhZ21lbnRzIiwiY29uc29sZSIsImxvZyIsInRyYW5zbGF0ZWRSZXN1bHRzIiwibWFwIiwicmVzdWx0IiwibWVzc2FnZSIsIm91dHB1dEZpbGVQYXRoIiwid3JpdGVGaWxlU3luYyIsImpvaW4iLCJjb25maWciLCJhcGkiLCJib2R5UGFyc2VyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/verification.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/verification.js"));
module.exports = __webpack_exports__;

})();